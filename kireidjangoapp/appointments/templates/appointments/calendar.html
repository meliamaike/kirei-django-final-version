{% extends "home/base.html" %}
{% load appointment_tags %}

{% block content %}
<div class="container pt-5 my-5" style = "height:100vh !important;">
  <div class="row justify-content-center">
    <div class="col-md-8">
      <div class="card">
        <div class="card-header pt-4">
          <h4>
            <strong>Elegí el día</strong>
          </h4>
        </div>
        <div class="card-body">
          <div id="calendar"></div>
        </div>
      </div>
    </div>
  </div>
</div>


<script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.2/locale/es.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    var today = new Date();
    var calendarEl = document.getElementById('calendar');
    var calendar = new FullCalendar.Calendar(calendarEl, {
      themeSystem: 'standard',
      height: 'auto',
      contentHeight: 'auto',
      aspectRatio: 1.5,
      headerToolbar: {
        start: '',
        center: 'title',
        end: 'prev,next today'
      },
      buttonText: {
        prev: '<',
        next: '>',
        today: 'Hoy',
        month: 'Mes',
        week: 'Semana',
        day: 'Día',
        list: 'Agenda'
      },
      hiddenDays: [0], // Exclude only 0 = Sunday
      initialView: 'dayGridMonth',
      editable: false,
      events: 'booking/calendar/',
      dateClick: function(info) {
        window.location.href = '/booking/slot/?date=' + info.dateStr;
      },
      // Set locale to Spanish
      locale: 'es',
      // Disable dates before today
      validRange: {
        start: today
      }
    });

    calendar.render();
  });
</script>
{% endblock %}
